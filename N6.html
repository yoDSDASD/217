<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>מכשירי יצור · דרגת N לפי Ra</title>
<style>
:root {
  --bg: #0f1115;
  --card: #171a21;
  --ink: #f5f5f5;
  --muted: #9ca3af;
  --accent: #3b82f6;
  --ok: #22c55e;
  --warn: #ef4444;
  --border: #2b2f36;
}
body {
  margin: 0;
  font-family: "Heebo", system-ui, sans-serif;
  background: var(--bg);
  color: var(--ink);
  padding: 20px;
  text-align: center;
}
h2 {
  margin: 0 0 10px;
  font-weight: 800;
}
.sub {
  color: var(--muted);
  font-size: 0.9rem;
  margin-bottom: 20px;
}
.card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 16px;
  box-shadow: 0 6px 20px rgba(0,0,0,0.3);
  margin-bottom: 20px;
}
input, select, button {
  width: 100%;
  padding: 12px;
  border-radius: 10px;
  border: 1px solid var(--border);
  background: #0f1115;
  color: var(--ink);
  font-size: 1rem;
  text-align: center;
  margin-top: 8px;
}
button {
  background: var(--accent);
  border: none;
  font-weight: 700;
  cursor: pointer;
  margin-top: 16px;
}
button:hover { filter: brightness(1.2); }
.result {
  font-size: 1.2rem;
  font-weight: 700;
  margin: 10px 0;
}
.tableWrap {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 14px;
  box-shadow: 0 8px 25px rgba(0,0,0,0.25);
  margin-top: 35px;
  overflow-x: auto;
  padding: 10px;
}
table {
  width: 100%;
  border-collapse: collapse;
  font-size: 0.95rem;
  color: var(--ink);
}
th, td {
  padding: 10px;
  border-bottom: 1px solid var(--border);
  text-align: center;
}
th {
  font-weight: 800;
  color: var(--muted);
}
tr.active {
  background-color: rgba(34,197,94,0.15);
  border-left: 3px solid var(--ok);
}
.pill {
  display: inline-block;
  padding: 4px 10px;
  border-radius: 20px;
  border: 1px solid var(--border);
  margin-top: 6px;
}
.ok { color: var(--ok); border-color: var(--ok); }
.warn { color: var(--warn); border-color: var(--warn); }
.fade { animation: fade 0.25s ease-out both; }
@keyframes fade { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: none; } }
</style>
</head>
<body>
  <h2>דרגת N לפי Ra</h2>
  <div class="sub">הזן ערך Ra וקבל את דרגת ה־N והטווח לפי תקן ISO 1302</div>

  <div class="card">
    <input id="ra" type="number" inputmode="decimal" placeholder="לדוגמה 2.5">
    <select id="unit">
      <option value="um">(µm) מיקרון</option>
      <option value="uin">(µin) מיקרו־אינץ׳</option>
    </select>
    <button onclick="calc()">חשב</button>
    <div class="result fade" id="res"></div>
  </div>

  <div class="tableWrap fade" id="tableWrap">
    <table id="tbl">
      <thead>
        <tr><th>דרגה</th><th>Ra נומינלי (µm)</th><th>טווח (µm)</th><th>Ra (µin)</th></tr>
      </thead>
      <tbody id="tbody"></tbody>
    </table>
  </div>

<script>
const µmToµin = v => v * 39.3701;
const fmt = v => Number(v).toFixed(3);
const N = [
  {n:1, ra:0.025}, {n:2, ra:0.05}, {n:3, ra:0.1}, {n:4, ra:0.2},
  {n:5, ra:0.4}, {n:6, ra:0.8}, {n:7, ra:1.6}, {n:8, ra:3.2},
  {n:9, ra:6.3}, {n:10, ra:12.5}, {n:11, ra:25}, {n:12, ra:50}
];
const bands = N.map((g,i)=>{
  const lo = i===0 ? 0 : Math.sqrt(g.ra * N[i-1].ra);
  const hi = i===N.length-1 ? Infinity : Math.sqrt(g.ra * N[i+1].ra);
  return {...g, lo, hi};
});
const tbody = document.getElementById('tbody');
bands.forEach(b=>{
  const hiShow = b.hi===Infinity? b.ra*Math.sqrt(2):b.hi;
  tbody.innerHTML += `
    <tr id="rowN${b.n}">
      <td><b>N${b.n}</b></td>
      <td>${fmt(b.ra)}</td>
      <td>${fmt(b.lo)} – ${fmt(hiShow)}</td>
      <td>${fmt(µmToµin(b.ra))}</td>
    </tr>`;
});
function calc(){
  const val = parseFloat(document.getElementById('ra').value.replace(',', '.'));
  const unit = document.getElementById('unit').value;
  const res = document.getElementById('res');
  if(isNaN(val) || val<=0){ res.textContent="יש להזין ערך תקין"; return; }
  const ra_um = unit==='uin'? val/39.3701 : val;
  const g = bands.find(b=>ra_um>=b.lo && ra_um<b.hi) || bands[bands.length-1];
  const hiShow = g.hi===Infinity? g.ra*Math.sqrt(2):g.hi;
  res.innerHTML = `
    דרגת <span class="pill ok">N${g.n}</span><br>
    Ra = ${fmt(ra_um)} µm (${fmt(µmToµin(ra_um))} µin)<br>
    טווח: ${fmt(g.lo)} – ${fmt(hiShow)} µm`;
  document.querySelectorAll('tr').forEach(tr=>tr.classList.remove('active'));
  document.getElementById(`rowN${g.n}`).classList.add('active');
  document.getElementById(`rowN${g.n}`).scrollIntoView({behavior:"smooth", block:"center"});
}
</script>
</body>
</html>
